<body>
  <!-- Hero Section Begin -->
  <section class="hero hero-normal">
    <div class="container">
    </div>
  </section>
  <!-- Hero Section End -->

  <!-- Breadcrumb Section Begin -->
  <section class="breadcrumb-section set-bg" data-setbg="img/breadcrumb.jpg">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center">
          <div class="breadcrumb__text">
            <h2>Giỏ hàng</h2>
            <div class="breadcrumb__option">
              <a href="/">Home</a>
              <span>Giỏ hàng</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Breadcrumb Section End -->

  <!-- Shoping Cart Section Begin -->
  <section class="shoping-cart spad">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="shoping__cart__table">
            <table>
              <thead>
                <tr>
                  <th class="shoping__product">Tên sản phẩm</th>
                  <th>Giá</th>
                  <th>Số lượng</th>
                  <th>Thành tiền</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                {{#each products}}
                <tr>
                  <td class="shoping__cart__item">
                    <img src="{{this.ANH}}" alt="" id="img-cart" />
                    <a href="/item-detail/{{this.MA_SP}}">
                    <h5>{{this.TEN_SP}}</h5></a>
                  </td>
                  <td class="shoping__cart__price">
                    {{this.GIA_SP}}
                  </td>
                  <td class="shoping__cart__quantity">
                    <div class="quantity">
                        <div class="pro-qty"> 
                    <input id="sp{{this.MA_SP}}" type="text" value="{{this.SO_LUONG}}" onchange ="changeQuality({{this.MA_SP}});" onclick ="changeQuality({{this.MA_SP}});"/> 
                    </div>
                      </div> 
                    {{!-- <span>{{this.quantity}}</span> --}}
                  </td>
                  <td class="shoping__cart__total">
                    {{this.total}}
                  </td>
                  <td class="shoping__cart__item__close">
                    <a href="/removeitem/{{this.MA_SP}}"><span class="icon_close"></span></a href="#">
                  </td>
                </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <div class="shoping__cart__btns">
            <a href="/cart" class="primary-btn cart-btn cart-btn-right"><span class="icon_loading"></span>
              Cập nhật giỏ hàng</a>
          </div>
        </div>
        <div class="col-lg-6">

        </div>
        <div class="col-lg-6">
          <div class="shoping__checkout">
            {{! <h5>Hoá đơn</h5> }}
            <ul id="totalCart">
            </ul>
            <a href="/checkout" class="primary-btn">Thanh toán</a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Shoping Cart Section End -->
  <script>
    const cTotal = document.querySelector('#totalCart');
    let cartTotal = 0;
    let
      price = 0;
    let a = [];
    hi =
      document.getElementsByClassName("shoping__cart__total");
    for (let i = 0; i <
      hi.length; i++) {
      a.push(parseInt(hi[i].textContent));
    };
    for (let i = 0; i <
      a.length; i++) {
      cartTotal = cartTotal + a[i];
    };
    TotalHTML = "<li>Tổng " +
      "tiền:" + " <span>" + cartTotal + "</span></li>";
    cTotal.innerHTML = TotalHTML;
    var changeQuality = (id) =>{
      const q = document.getElementById("sp"+id).value;
      window.location.replace("/changq?id="+id+"&q="+q);
    }; 
  </script>
</body>